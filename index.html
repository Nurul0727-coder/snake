<!DOCTYPE html>
<html>
  <head>
    <style>
      .board {
        margin: 100px auto;
        background-image: url(backgroundImg.jpeg);
        position: relative;
      }

      .snake {
        background-color: lightgreen;
        border-radius: 4px;
        position: absolute;
      }
    </style>
  </head>
  <body>
    <div style="text-align: center; background-color: antiquewhite">
      <button onclick="startGame();">Start</button>
      <button onclick="pauseGame();">Pause</button>
      <button onclick="restartGame();">Restart</button>
    </div>
    <div class="board" id="board">
      <!--Generated-->
    </div>
    <div style="text-align: center">
      <button onclick="changeDirection('up');">Up</button>
      <button onclick="changeDirection('down');">Down</button>
      <button onclick="changeDirection('left');">Left</button>
      <button onclick="changeDirection('right');">Right</button>
    </div>

    <script>
      let headTop = 10;
      let headLeft = 9;
      let direction = "right";

      let tails = [
        { x: 2, y: 5 },
        { x: 3, y: 5 },
        { x: 4, y: 5 },
      ];

      let IntervalId = null;

      const config = {
        size: 20,
        width: 35,
        height: 40,
      };

      const boardEl = document.getElementById("board");
      boardEl.style.width = config.width * config.size + "px";
      boardEl.style.height = config.height * config.size + "px";

      function goUp() {
        headTop = headTop - 1;
        if (headTop < 0) {
          headTop = config.height - 1;
        }
        render();
      }

      function goDown() {
        headTop = headTop + 1;
        if (headTop === config.height) {
          headTop = 0;
        }
        render();
      }

      function changeDirection(newDirection) {
        if (direction === "up" || direction === "down") {
          if (newDirection === "right" || newDirection === "left") {
            direction = newDirection;
          }
        } else if (direction === "right" || direction === "left") {
          if (newDirection === "up" || newDirection === "down") {
            direction = newDirection;
          }
        }
      }

      function goRight() {
        headLeft = headLeft - 1;
        if (headLeft < 0) {
          headLeft = config.width - 1;
        }
        render();
      }
      function goLeft() {
        headLeft = headLeft + 1;
        if (headLeft === config.width) {
          headLeft = 0;
        }
        render();
      }

      function startGame() {
        if (!IntervalId) {
          IntervalId = setInterval(gameLoop, 300);
        }
      }
      function reset() {
        headTop = 10;
        headLeft = 12;
        direction = "up";
        headTop = 5;
        headLeft = 5;
        direction = "right";

        tails = [
          { x: 2, y: 5 },
          { x: 3, y: 5 },
          { x: 4, y: 5 },
        ];
      }
      function restartGame() {
        reset();
        startGame();
      }
      function pauseGame() {
        clearInterval(IntervalId);
        IntervalId = null;
      }

      function gameLoop() {
        tails.push({ x: headLeft, y: headTop });
        tails.shift();
        switch (direction) {
          case "up":
            goUp();
            break;
          case "left":
            goRight();
            break;
          case "right":
            goLeft();
            break;
          case "down":
            goDown();
            break;
        }
      }
      function listenKeys(event) {
        const key = event.key;
        switch (key) {
          case "ArrowUp":
            changeDirection("up");
            break;
          case "ArrowDown":
            changeDirection("down");
            break;

          case "ArrowRight":
            changeDirection("right");
            break;

          case "ArrowLeft":
            changeDirection("left");
            break;
        }
      }
      document.addEventListener("keydown", listenKeys);

      function render() {
        let tailsHtml = "";

        for (let i = 0; i < tails.length; i++) {
          tailsHtml += `<div class="snake" style="width:${
            1 * config.size
          }px; height:${1 * config.size}px; top: ${
            tails[i].y * config.size
          }px; left:${tails[i].x * config.size}px"> </div>`;
        }
        const headHtml = `
        <div class="snake" style="width:${1 * config.size}px; height:${
          1 * config.size
        }px; top: ${headTop * config.size}px; left:${
          headLeft * config.size
        }px"> </div>
        `;
        const snakeHtml = `${tailsHtml}`;
        boardEl.innerHTML = snakeHtml;
        //     <div style="text-align: center">
        //   <button onclick="changeDirection('up');">Up</button>
        //   <button onclick="changeDirection('down');">Down</button>
        //   <button onclick="changeDirection('left');">Left</button>
        //   <button onclick="changeDirection('right');">Right</button>
        // </div>
      }
    </script>
  </body>
</html>
